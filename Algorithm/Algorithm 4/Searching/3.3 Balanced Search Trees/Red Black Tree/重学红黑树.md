# 红黑树

重学主要是因为学过了 AVL 树，并且对 B 树有所了解，再次学习又有新的感受。

比较重要的性质

- 根节点一定是黑色
- 新增节点是红色
- null 空节点是黑色
- 不能同时存在两个相邻的红色节点

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/78762ae27e0b4e2cbaa8a4ce2b17f48a~tplv-k3u1fbpfcp-watermark.image?)

红黑树跟最有拥有三个键值的 B 树（四阶 B 树）具有等价性，黑色节点跟子节点(RED)融合在一起，形成一个 B 树节点。这也从另外一个角度解释了为什么红黑树中父子节点不能同时为红色。

## 添加的所有情况

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e2b2def3cd94318be94118c003a22e0~tplv-k3u1fbpfcp-watermark.image?)
接下来考虑的都是两个红色相接的情况（Double Red)

## 叔叔节点不是红色

叔叔节点指的是父节点的另外一个子节点，比如 17 的叔叔节点是 33。

### LL/RR

这里有点像 AVL 树中的 LL/RR，LL 指的是两个红色节点位于左子节点和左子节点的左子节点。

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0decba9258354df9b118949bf5ba1b66~tplv-k3u1fbpfcp-watermark.image?)
（灰色节点别管，只是示意这里可以添加）

这里跟 AVL 真的像，不仅需要旋转（切换颜色）保证平衡，并且需要更换根节点。

### LR/RL

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7c28e068e53d401aaddc9cd827c06242~tplv-k3u1fbpfcp-watermark.image?)

## 叔叔节点是红色

### LL/RR

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e2ca204bd46346608063270fd94e95e3~tplv-k3u1fbpfcp-watermark.image?)

#### 等价于 B 树的上溢

对于叔叔节点是红色的情况，需要分裂成两个黑色根节点，并且将原来的根节点向上合并。根节点向上合并后需要染成红色（新添加）节点。

**这种情况只需要染色，不需要旋转。**

### LR/RL

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cbf41fe3a5b04b7582f1b8b8264548df~tplv-k3u1fbpfcp-watermark.image?)

也是类似，只需要染色，注意，如果上溢到根节点，就直接将根节点染黑即可。
